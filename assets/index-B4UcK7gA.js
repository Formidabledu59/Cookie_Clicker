var r=Object.defineProperty;var h=(i,e,t)=>e in i?r(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var n=(i,e,t)=>h(i,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();const p="/Cookie_Clicker/assets/cookie-CWq7-coF.png";class u{constructor(e,t){n(this,"gameElement",null);n(this,"onClick",null);this.gameElement=e,this.onClick=t}render(){this.clickableAreaElement=document.createElement("section"),this.clickableAreaElement.id="game-clickable-area",this.clickableAreaElement.innerHTML=`
        <img id="cookie" src=${p} width="256px" height="256px" alt="An awesome cookie." />
    `,this.clickableAreaElement.addEventListener("click",()=>{window.requestAnimationFrame(()=>{this.clickableAreaElement.classList.add("active"),setTimeout(()=>{window.requestAnimationFrame(()=>{this.clickableAreaElement.classList.remove("active")})},100)}),this.onClick()}),this.gameElement.append(this.clickableAreaElement)}}class m{constructor(e){n(this,"cookies",0);n(this,"gameElement",null);n(this,"scoreElement",null);n(this,"clickableArea",null);n(this,"onClickableAreaClick",()=>{this.cookies+=1,window.requestAnimationFrame(()=>{this.updateScore()})});this.cookies=e.cookies,this.gameElement=document.querySelector("#game"),this.clickableArea=new u(this.gameElement,this.onClickableAreaClick)}start(){this.render()}render(){this.renderScore(),this.clickableArea.render()}renderScore(){this.scoreElement=document.createElement("section"),this.scoreElement.id="game-score",this.gameElement.append(this.scoreElement),this.updateScore()}updateScore(){this.scoreElement.innerHTML=`
        <span>${this.cookies} cookies</span>
    `}}function d(i,e){let t=0;i.addEventListener("click",()=>{t++,e.innerText=`Vous avez cliqu√© ${t} fois`})}class g{constructor(e){this.game=e,this.cookies=e.cookies,this.money=0,this.passiveLevel=0,this.passiveGain=0,this.shopElement=null,this.toggleButton=null,this.cookieDisplay=null,this.moneyDisplay=null,this.render(),this.startPassiveIncome()}render(){this.createToggleButton(),this.createShopPanel(),document.body.append(this.toggleButton,this.shopElement)}createToggleButton(){this.toggleButton=document.createElement("button"),this.toggleButton.id="shop-toggle",this.toggleButton.innerText="üõí",this.toggleButton.addEventListener("click",()=>{this.shopElement.classList.toggle("open")})}createShopPanel(){this.shopElement=document.createElement("aside"),this.shopElement.id="shop",this.shopElement.innerHTML=`
        <h2>Shop √† Cookie</h2>
        <p>Cookies: <span id="shop-cookie-count">0</span></p>
        <p>Argent: <span id="shop-money-count">0</span></p>
        <input type="number" id="sell-amount" min="1" placeholder="Combien vendre" />
        <button id="sell-cookies">Vendre</button>
        <button id="sell-all">Tout vendre</button>
        <div class="upgrade">
          <h3>Click passif</h3>
          <img src="src/assets/shop/passive.png" alt="Click Passif" class="shop-item-image" />
          <p>Niveau: <span id="passive-lvl">0</span></p>
          <p>Gain: <span id="passive-gain">1</span> cookie/s</p>
          <p>Prix: <span id="passive-cost">10</span> $</p>
          <button id="upgrade-passive">Acheter/Am√©liorer</button>
        </div>
      `,this.cookieDisplay=this.shopElement.querySelector("#shop-cookie-count"),this.moneyDisplay=this.shopElement.querySelector("#shop-money-count"),this.shopElement.querySelector("#sell-cookies").addEventListener("click",()=>this.sellCookies()),this.shopElement.querySelector("#sell-all").addEventListener("click",()=>this.sellAllCookies()),this.shopElement.querySelector("#upgrade-passive").addEventListener("click",()=>this.upgradePassive()),this.updateDisplays()}updateDisplays(){this.cookieDisplay.innerText=Math.floor(this.game.cookies),this.moneyDisplay.innerText=this.money,this.shopElement.querySelector("#passive-lvl").innerText=this.passiveLevel,this.shopElement.querySelector("#passive-gain").innerText=this.passiveGain.toFixed(1),this.shopElement.querySelector("#passive-cost").innerText=this.getPassiveCost()}sellCookies(){const e=this.shopElement.querySelector("#sell-amount"),t=parseInt(e.value);!isNaN(t)&&t>0&&this.game.cookies>=t&&(this.game.cookies-=t,this.money+=t,this.game.updateScore(),this.updateDisplays(),e.value="")}sellAllCookies(){const e=Math.floor(this.game.cookies);e>0&&(this.game.cookies-=e,this.money+=e,this.game.updateScore(),this.updateDisplays())}getPassiveCost(){return 10+this.passiveLevel*5}upgradePassive(){const e=this.getPassiveCost();this.money>=e&&(this.money-=e,this.passiveLevel++,this.passiveGain=.5+(this.passiveLevel-1)*.1,this.updateDisplays())}startPassiveIncome(){setInterval(()=>{this.game.cookies+=this.passiveGain,this.game.updateScore(),this.updateDisplays()},1e3)}}document.querySelector("#app").innerHTML=`
  <div>
    <h1>Mon Cookie Clicker</h1>
    <div id="game"></div>
    <p id="counter-text">Vous avez cliqu√© 0 fois</p>
  </div>
`;const c=new m({cookies:0});c.start();setTimeout(()=>{const i=document.querySelector("#cookie"),e=document.querySelector("#counter-text");i&&e&&d(i,e)},0);new g(c);
